{"ast":null,"code":"var _jsxFileName = \"D:\\\\Shashini\\\\Assignments\\\\Assignments\\\\2025\\\\NSBM\\\\Plymouth\\\\Keith-2\\\\luxury_car_rental\\\\Frontend\\\\src\\\\components\\\\User\\\\ResumeAndCoverLetter.js\",\n  _s = $RefreshSig$();\nimport styles from \"./ResumeAndCoverLetter.module.css\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ResumeAndCoverLetter = ({\n  resume,\n  coverLetter,\n  setResume,\n  setCoverLetter\n}) => {\n  _s();\n  // const [selectedFile, setSelectedFile] = useState(null);\n  const [resumeFile, setResumeFile] = useState(null); // Changed state to properly handle resume files\n  const [coverFile, setCoverFile] = useState(null); // Changed state to properly handle cover letter files\n\n  const savedUser = JSON.parse(localStorage.getItem(\"user\"));\n  const handleResumeFileChange = event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (file) {\n      setResumeFile(file); // Update the state with the selected file\n    }\n  };\n  const handleCoverFileChange = event => {\n    var _event$target$files2;\n    const file = (_event$target$files2 = event.target.files) === null || _event$target$files2 === void 0 ? void 0 : _event$target$files2[0];\n    if (file) {\n      setCoverFile(file); // Update the state with the selected file\n    }\n  };\n  const handleSaveFiles = async () => {\n    const formData = new FormData();\n    if (resumeFile) {\n      formData.append(\"resume\", resumeFile);\n    }\n    if (coverFile) {\n      formData.append(\"coverLetter\", coverFile);\n    }\n    formData.append(\"userId\", savedUser.user.id); // Replace with actual user ID\n\n    try {\n      console.log(\"Sending files:\", formData.get(\"resume\"), formData.get(\"coverLetter\"));\n      const res = await axios.post(\"http://localhost:5000/api/user/upload-files\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      alert(\"Files uploaded successfully!\");\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\n      window.location.reload();\n    } catch (error) {\n      console.error(\"Error uploading files:\", error);\n      alert(\"Failed to upload files.\");\n    }\n  };\n  const handleOpenInNewTab = fileOrUrl => {\n    if (fileOrUrl) {\n      window.open(fileOrUrl, \"_blank\", \"noopener,noreferrer\");\n      if (typeof fileOrUrl !== 'string') {\n        URL.revokeObjectURL(fileOrUrl); // Clean up the object URL\n      }\n    } else {\n      alert(\"No file uploaded yet.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-actions-row\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `card ${styles.resumeAndCoverLetter}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Resume and Cover Letter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.fileSection,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Resume\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Upload Resume (PDF):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".pdf\",\n          onChange: handleResumeFileChange,\n          id: \"resume-upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }, this), resume || resumeFile || savedUser.user.resume ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleOpenInNewTab(resume || resumeFile || savedUser.user.resume),\n            children: \"View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"No resume uploaded\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.fileSection,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Cover Letter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Upload Cover Letter (PDF):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".pdf\",\n          onChange: handleCoverFileChange,\n          id: \"cover-letter-upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 9\n        }, this), coverLetter || coverFile || savedUser.user.coverLetter ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleOpenInNewTab(coverLetter || coverFile || savedUser.user.coverLetter),\n            children: \"View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"No cover letter uploaded\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSaveFiles,\n        className: \"save-button\",\n        children: \"Save Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(ResumeAndCoverLetter, \"trcEqbyBCIxG2oCpRlTElggl4CM=\");\n_c = ResumeAndCoverLetter;\nexport default ResumeAndCoverLetter;\nvar _c;\n$RefreshReg$(_c, \"ResumeAndCoverLetter\");","map":{"version":3,"names":["styles","axios","useState","jsxDEV","_jsxDEV","ResumeAndCoverLetter","resume","coverLetter","setResume","setCoverLetter","_s","resumeFile","setResumeFile","coverFile","setCoverFile","savedUser","JSON","parse","localStorage","getItem","handleResumeFileChange","event","_event$target$files","file","target","files","handleCoverFileChange","_event$target$files2","handleSaveFiles","formData","FormData","append","user","id","console","log","get","res","post","headers","alert","setItem","stringify","data","window","location","reload","error","handleOpenInNewTab","fileOrUrl","open","URL","revokeObjectURL","className","children","resumeAndCoverLetter","fileName","_jsxFileName","lineNumber","columnNumber","fileSection","type","accept","onChange","onClick","_c","$RefreshReg$"],"sources":["D:/Shashini/Assignments/Assignments/2025/NSBM/Plymouth/Keith-2/luxury_car_rental/Frontend/src/components/User/ResumeAndCoverLetter.js"],"sourcesContent":["import styles from \"./ResumeAndCoverLetter.module.css\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\n\n\nconst ResumeAndCoverLetter = ({ resume, coverLetter, setResume, setCoverLetter }) => {\n      // const [selectedFile, setSelectedFile] = useState(null);\n      const [resumeFile, setResumeFile] = useState(null); // Changed state to properly handle resume files\n      const [coverFile, setCoverFile] = useState(null);  // Changed state to properly handle cover letter files\n    \n   \n  \n  const savedUser = JSON.parse(localStorage.getItem(\"user\"));\n\n  const handleResumeFileChange = (event) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setResumeFile(file); // Update the state with the selected file\n    }\n  };\n\n  const handleCoverFileChange = (event) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setCoverFile(file); // Update the state with the selected file\n    }\n  };\n\n  const handleSaveFiles = async () => {\n    const formData = new FormData();\n\n    if (resumeFile) {\n      formData.append(\"resume\", resumeFile);\n     \n    }\n    if (coverFile) {\n      formData.append(\"coverLetter\", coverFile);\n    }\n    formData.append(\"userId\", savedUser.user.id); // Replace with actual user ID\n\n\n    try {\n      console.log(\"Sending files:\", formData.get(\"resume\"), formData.get(\"coverLetter\"));\n\n      const res = await axios.post(\"http://localhost:5000/api/user/upload-files\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      alert(\"Files uploaded successfully!\" );\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\n      window.location.reload()  \n     \n    } catch (error) {\n      console.error(\"Error uploading files:\", error);\n      alert(\"Failed to upload files.\");\n    }\n  };\n\n  const handleOpenInNewTab = (fileOrUrl) => {\n    if (fileOrUrl) {\n    \n\n      window.open(fileOrUrl, \"_blank\", \"noopener,noreferrer\");\n      if (typeof fileOrUrl !== 'string') {\n        URL.revokeObjectURL(fileOrUrl); // Clean up the object URL\n      }\n    } else {\n      alert(\"No file uploaded yet.\");\n    }\n  };\n  \n\n  return (\n    <div className=\"user-actions-row\">\n    <div className={`card ${styles.resumeAndCoverLetter}`}>\n      <h2>Resume and Cover Letter</h2>\n\n      <div className={styles.fileSection}>\n      <h3>Resume</h3>\n        <p>Upload Resume (PDF):</p>\n        <input\n          type=\"file\"\n          accept=\".pdf\"\n          onChange={handleResumeFileChange}\n          id=\"resume-upload\"\n        />\n        {resume || resumeFile || savedUser.user.resume ? (\n          <div>\n          <button onClick={() => handleOpenInNewTab( resume||resumeFile ||savedUser.user.resume)}>View</button></div>\n         \n        ) : (\n          <p>\n            No resume uploaded{\" \"}\n            \n          </p>\n        )}\n      </div>\n\n      <div className={styles.fileSection}>\n        <h3>Cover Letter</h3>\n        <p>Upload Cover Letter (PDF):</p>\n        <input\n          type=\"file\"\n          accept=\".pdf\"\n          onChange={handleCoverFileChange}\n          id=\"cover-letter-upload\"\n        />\n        {coverLetter || coverFile || savedUser.user.coverLetter ? (\n          <div>\n          <button onClick={() => handleOpenInNewTab( coverLetter || coverFile ||savedUser.user.coverLetter)}>View</button></div>\n          \n        ) : (\n          <p>\n            No cover letter uploaded{\" \"}            \n          </p>\n        )}\n      </div>\n      <button onClick={handleSaveFiles} className=\"save-button\">\n        Save Files\n      </button>\n    </div>\n    </div>\n  );\n};\n\nexport default ResumeAndCoverLetter;\n"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,mCAAmC;AACtD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGjC,MAAMC,oBAAoB,GAAGA,CAAC;EAAEC,MAAM;EAAEC,WAAW;EAAEC,SAAS;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EAC/E;EACA,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACpD,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAE;;EAIvD,MAAMa,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAE1D,MAAMC,sBAAsB,GAAIC,KAAK,IAAK;IAAA,IAAAC,mBAAA;IACxC,MAAMC,IAAI,IAAAD,mBAAA,GAAGD,KAAK,CAACG,MAAM,CAACC,KAAK,cAAAH,mBAAA,uBAAlBA,mBAAA,CAAqB,CAAC,CAAC;IACpC,IAAIC,IAAI,EAAE;MACRX,aAAa,CAACW,IAAI,CAAC,CAAC,CAAC;IACvB;EACF,CAAC;EAED,MAAMG,qBAAqB,GAAIL,KAAK,IAAK;IAAA,IAAAM,oBAAA;IACvC,MAAMJ,IAAI,IAAAI,oBAAA,GAAGN,KAAK,CAACG,MAAM,CAACC,KAAK,cAAAE,oBAAA,uBAAlBA,oBAAA,CAAqB,CAAC,CAAC;IACpC,IAAIJ,IAAI,EAAE;MACRT,YAAY,CAACS,IAAI,CAAC,CAAC,CAAC;IACtB;EACF,CAAC;EAED,MAAMK,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAE/B,IAAInB,UAAU,EAAE;MACdkB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEpB,UAAU,CAAC;IAEvC;IACA,IAAIE,SAAS,EAAE;MACbgB,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAElB,SAAS,CAAC;IAC3C;IACAgB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEhB,SAAS,CAACiB,IAAI,CAACC,EAAE,CAAC,CAAC,CAAC;;IAG9C,IAAI;MACFC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEN,QAAQ,CAACO,GAAG,CAAC,QAAQ,CAAC,EAAEP,QAAQ,CAACO,GAAG,CAAC,aAAa,CAAC,CAAC;MAElF,MAAMC,GAAG,GAAG,MAAMpC,KAAK,CAACqC,IAAI,CAAC,6CAA6C,EAAET,QAAQ,EAAE;QACpFU,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MACFC,KAAK,CAAC,8BAA+B,CAAC;MACtCtB,YAAY,CAACuB,OAAO,CAAC,MAAM,EAAEzB,IAAI,CAAC0B,SAAS,CAACL,GAAG,CAACM,IAAI,CAAC,CAAC;MACtDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAE1B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CP,KAAK,CAAC,yBAAyB,CAAC;IAClC;EACF,CAAC;EAED,MAAMQ,kBAAkB,GAAIC,SAAS,IAAK;IACxC,IAAIA,SAAS,EAAE;MAGbL,MAAM,CAACM,IAAI,CAACD,SAAS,EAAE,QAAQ,EAAE,qBAAqB,CAAC;MACvD,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;QACjCE,GAAG,CAACC,eAAe,CAACH,SAAS,CAAC,CAAC,CAAC;MAClC;IACF,CAAC,MAAM;MACLT,KAAK,CAAC,uBAAuB,CAAC;IAChC;EACF,CAAC;EAGD,oBACEpC,OAAA;IAAKiD,SAAS,EAAC,kBAAkB;IAAAC,QAAA,eACjClD,OAAA;MAAKiD,SAAS,EAAE,QAAQrD,MAAM,CAACuD,oBAAoB,EAAG;MAAAD,QAAA,gBACpDlD,OAAA;QAAAkD,QAAA,EAAI;MAAuB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAEhCvD,OAAA;QAAKiD,SAAS,EAAErD,MAAM,CAAC4D,WAAY;QAAAN,QAAA,gBACnClD,OAAA;UAAAkD,QAAA,EAAI;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACbvD,OAAA;UAAAkD,QAAA,EAAG;QAAoB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAC3BvD,OAAA;UACEyD,IAAI,EAAC,MAAM;UACXC,MAAM,EAAC,MAAM;UACbC,QAAQ,EAAE3C,sBAAuB;UACjCa,EAAE,EAAC;QAAe;UAAAuB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC,EACDrD,MAAM,IAAIK,UAAU,IAAII,SAAS,CAACiB,IAAI,CAAC1B,MAAM,gBAC5CF,OAAA;UAAAkD,QAAA,eACAlD,OAAA;YAAQ4D,OAAO,EAAEA,CAAA,KAAMhB,kBAAkB,CAAE1C,MAAM,IAAEK,UAAU,IAAGI,SAAS,CAACiB,IAAI,CAAC1B,MAAM,CAAE;YAAAgD,QAAA,EAAC;UAAI;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,gBAG3GvD,OAAA;UAAAkD,QAAA,GAAG,oBACiB,EAAC,GAAG;QAAA;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAErB,CACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAENvD,OAAA;QAAKiD,SAAS,EAAErD,MAAM,CAAC4D,WAAY;QAAAN,QAAA,gBACjClD,OAAA;UAAAkD,QAAA,EAAI;QAAY;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrBvD,OAAA;UAAAkD,QAAA,EAAG;QAA0B;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACjCvD,OAAA;UACEyD,IAAI,EAAC,MAAM;UACXC,MAAM,EAAC,MAAM;UACbC,QAAQ,EAAErC,qBAAsB;UAChCO,EAAE,EAAC;QAAqB;UAAAuB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzB,CAAC,EACDpD,WAAW,IAAIM,SAAS,IAAIE,SAAS,CAACiB,IAAI,CAACzB,WAAW,gBACrDH,OAAA;UAAAkD,QAAA,eACAlD,OAAA;YAAQ4D,OAAO,EAAEA,CAAA,KAAMhB,kBAAkB,CAAEzC,WAAW,IAAIM,SAAS,IAAGE,SAAS,CAACiB,IAAI,CAACzB,WAAW,CAAE;YAAA+C,QAAA,EAAC;UAAI;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,gBAGtHvD,OAAA;UAAAkD,QAAA,GAAG,0BACuB,EAAC,GAAG;QAAA;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3B,CACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACNvD,OAAA;QAAQ4D,OAAO,EAAEpC,eAAgB;QAACyB,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAC;MAE1D;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CAAC;AAEV,CAAC;AAACjD,EAAA,CAvHIL,oBAAoB;AAAA4D,EAAA,GAApB5D,oBAAoB;AAyH1B,eAAeA,oBAAoB;AAAC,IAAA4D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}